$schema: https://azuremlschemas.azureedge.net/latest/commandJob.schema.json
type: command

# Specify the compute cluster to use for training
compute: azureml:arisa-compute

# Define the environment (Docker image and conda dependencies)
environment:
  image: "mcr.microsoft.com/azureml/openmpi4.1.0-ubuntu20.04:latest"
  conda_file: ./conda-env.yml

# The command to execute on the compute cluster
command: >
  git clone https://github.com/KonradSdev/ARISA-Final-Project.git /mnt/data/cloned_repo &&
  cd /mnt/data/cloned_repo &&
  pip install -r requirements.txt &&
  python /DSML/train.py

#  python /DSML/preproc.py &&
# Define where to save outputs (model, etc.)
outputs:
  model_output:
    type: uri_folder
    path: azureml://datastores/workspaceblobstore/paths/outputs/model

# This section can be used to pass in training data
inputs:
  training_data:
    type: uri_folder
    path: azureml://datastores/workspaceblobstore/paths/data